<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <title>Tshepang logs &middot; reprepro saved my live</title>
        <link rel="shortcut icon" href="http://tshepang.net/favicon.ico" />
<link href="http://tshepang.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Tshepang logs Atom Feed" />

        <link rel="stylesheet" href="http://tshepang.net/theme/css/screen.css" type="text/css" />
        <link rel="stylesheet" href="http://tshepang.net/theme/css/pygments.css" type="text/css" />


    </head>
    <body>
<div id="header">
            <ul id="nav">
                <li><a href="http://tshepang.net">Home</a></li>
<li><a href="http://tshepang.net/about-me.html">about me</a></li>
<li><a href="http://tshepang.net/key-posts.html">key posts</a></li>
<li><a href="http://tshepang.net/archives.html">Archives</a></li>
            </ul>
            <div class="header_box">
                <h1><a href="http://tshepang.net">Tshepang logs</a></h1>
            </div>
        </div>
        <div id="wrapper">
            <div id="content">
                <h4 class="date">Dec 12,  2008</h4>
                <div class="post">
<h2 class="title">
                        <a href="http://tshepang.net/reprepro-saved-my-live" rel="bookmark" title="Permanent Link to &quot;reprepro saved my live&quot;">reprepro saved my live</a>
                    </h2>

                    <p>Much of this is obsolete: I no longer build my own Debian packages.</p>
<hr class="docutils" />
<p>That's a joke title, but <a class="reference external" href="http://mirrorer.alioth.debian.org/">that fabulous tool</a> really did help me a
lot. When doing package builds, all I need to run is the following
after a build:</p>
<div class="highlight"><pre><span class="nv">$ </span>rm *udeb
<span class="nv">$ </span>reprepro --basedir ~/.repo_directory includedeb sid *deb
<span class="nv">$ </span>sudo apt-get update
</pre></div>
<p>The first command removes debian-installer packages which I don't need,
the second takes the remaining packages and adds them into the
reprepro-managed Debian repository while also making them available in
the Packages file, and the third updates the system's apt database in
order to pick up the changes. Also, if I want to get rid of something
from the repo, all I do is:</p>
<pre class="literal-block">
$ reprepro --basedir ~/.repo_directory removesrc sid glibc
</pre>
<p>I don't know why anyone would love to remove glibc binary packages, but
it's that simple.</p>
<p>Achieving this used to be painful before I discovered reprepro, for I
did the whole thing manually, which was not scalable since old packages
were sitting rotting in the repo, making it grow beyond 30GB (it now is
about 10GB). This also meant that I ran 'apt-ftparchive packages' on the
entire .debs each time I wanted an updated Packages file, and that was
dozens of minutes of heavy I/O. This painful life has been going on for
a number of months, and am stupid that I didn't search harder for a
better solution.</p>
<p>Before doing things this way, I was making use of the nifty <a class="reference external" href="http://aptoncd.sourceforge.net/">APTonCD</a>,
but it started to become unusable due to excessive memory consumption
after some system updates. It's not clear where the bug lies, nor do I
know if it's a known problem, which I didn't report because I was using
Ubuntu's package, a much improved and re-written 0.1.98, as opposed to
Debian's 'bug-free' 0.1 (though I later discovered the bug to exist when
running the package in Ubuntu 8.10 too).</p>
<hr class="docutils" />
<p><a class="reference external" href="http://tshepang.net/my-debian-package-management-setup">an update on how I do things now</a></p>


                    <div class="clear"></div>
                    <div class="info">
<a href="http://tshepang.net/reprepro-saved-my-live">posted at 12:00 am</a>&nbsp;&middot;&nbsp;<a href="http://tshepang.net/computing" rel="tag">computing</a>
                        <div class="tags">
                            <a href="http://tshepang.net/tag/debian">Debian</a>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>

                <div class="clear"></div>
                <div id="footer">
                    <p>
                    Mockingbird theme by <a href="http://nevanscott.com/">Nevan Scott</a>
                    &middot;
                    <a class="atom" href="http://tshepang.net/feeds/all.atom.xml">Feed</a>
                </div>
            </div>
            <div class="clear"></div>
        </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-16685250-3");
    pageTracker._trackPageview();
    } catch(err) {}</script>
    </body>
</html>