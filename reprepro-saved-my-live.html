<!DOCTYPE html>
<html lang="en">
<head>


    <meta name="tags" contents="Debian" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://tshepang.net">Tshepang logs <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="http://tshepang.net/about-me.html">about me</a></li>
            <li><a href="http://tshepang.net/key-posts.html">key posts</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="http://tshepang.net/reprepro-saved-my-live" rel="bookmark"
         title="Permalink to reprepro saved my live">reprepro saved my live</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2008-12-12T00:00:00">
      2008-12-12
    </abbr>
    <address class="vcard author">
      By <a class="url fn" href="http://tshepang.net/author/tshepang-lekhonkhobe.html">Tshepang Lekhonkhobe</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Much of this is obsolete: I no longer build my own Debian packages.</p>
<hr class="docutils" />
<p>That's a joke title, but <a class="reference external" href="http://mirrorer.alioth.debian.org/">that fabulous tool</a> really did help me a
lot. When doing package builds, all I need to run is the following
after a build:</p>
<div class="highlight"><pre><span class="nv">$ </span>rm *udeb
<span class="nv">$ </span>reprepro --basedir ~/.repo_directory includedeb sid *deb
<span class="nv">$ </span>sudo apt-get update
</pre></div>
<p>The first command removes debian-installer packages which I don't need,
the second takes the remaining packages and adds them into the
reprepro-managed Debian repository while also making them available in
the Packages file, and the third updates the system's apt database in
order to pick up the changes. Also, if I want to get rid of something
from the repo, all I do is:</p>
<pre class="literal-block">
$ reprepro --basedir ~/.repo_directory removesrc sid glibc
</pre>
<p>I don't know why anyone would love to remove glibc binary packages, but
it's that simple.</p>
<p>Achieving this used to be painful before I discovered reprepro, for I
did the whole thing manually, which was not scalable since old packages
were sitting rotting in the repo, making it grow beyond 30GB (it now is
about 10GB). This also meant that I ran 'apt-ftparchive packages' on the
entire .debs each time I wanted an updated Packages file, and that was
dozens of minutes of heavy I/O. This painful life has been going on for
a number of months, and am stupid that I didn't search harder for a
better solution.</p>
<p>Before doing things this way, I was making use of the nifty <a class="reference external" href="http://aptoncd.sourceforge.net/">APTonCD</a>,
but it started to become unusable due to excessive memory consumption
after some system updates. It's not clear where the bug lies, nor do I
know if it's a known problem, which I didn't report because I was using
Ubuntu's package, a much improved and re-written 0.1.98, as opposed to
Debian's 'bug-free' 0.1 (though I later discovered the bug to exist when
running the package in Ubuntu 8.10 too).</p>
<hr class="docutils" />
<p><a class="reference external" href="http://tshepang.net/my-debian-package-management-setup">an update on how I do things now</a></p>

  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>