<!DOCTYPE html>
<html lang="en">
<head>
		<title>Tshepang logs &mdash; reprepro saved my live</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="http://tshepang.net/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Tshepang logs â€” Flux Atom"
			href="http://tshepang.net/" /> 
		<!--[if lte IE 8]><script src="http://tshepang.net/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background " >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="http://tshepang.net">Tshepang logs</a></h1>
		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://tshepang.net/about-me.html">about me</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://tshepang.net/key-posts.html">key posts</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://tshepang.net/arts">arts</a></li>
						<li class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://tshepang.net/computing">computing</a></li>
						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://tshepang.net/misc">misc</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
		</div>
	
		<div id="contents">

<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://tshepang.net/reprepro-saved-my-live">2008-12-12</a></div>
		<span class="byline">By <a href="http://tshepang.net/author/tshepang-lekhonkhobe.html">Tshepang Lekhonkhobe</a></span>
			<div class="comments"><a href="http://tshepang.net/reprepro-saved-my-live#disqus_thread" title="Comment on reprepro saved my live">comments</a></div>
			<span class="cat-links"><a href="http://tshepang.net/computing" title="View all posts in computing" rel="category tag">computing</a></span>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://tshepang.net/reprepro-saved-my-live" title="Permalink to reprepro saved my live" rel="bookmark">reprepro saved my live</a>
		</h2>
		<div class="entry-content">
			<p>Much of this is obsolete: I no longer build my own Debian packages.</p>
<hr class="docutils" />
<p>That's a joke title, but <a class="reference external" href="http://mirrorer.alioth.debian.org/">that fabulous tool</a> really did help me a
lot. When doing package builds, all I need to run is the following
after a build:</p>
<div class="highlight"><pre><span class="nv">$ </span>rm *udeb
<span class="nv">$ </span>reprepro --basedir ~/.repo_directory includedeb sid *deb
<span class="nv">$ </span>sudo apt-get update
</pre></div>
<p>The first command removes debian-installer packages which I don't need,
the second takes the remaining packages and adds them into the
reprepro-managed Debian repository while also making them available in
the Packages file, and the third updates the system's apt database in
order to pick up the changes. Also, if I want to get rid of something
from the repo, all I do is:</p>
<pre class="literal-block">
$ reprepro --basedir ~/.repo_directory removesrc sid glibc
</pre>
<p>I don't know why anyone would love to remove glibc binary packages, but
it's that simple.</p>
<p>Achieving this used to be painful before I discovered reprepro, for I
did the whole thing manually, which was not scalable since old packages
were sitting rotting in the repo, making it grow beyond 30GB (it now is
about 10GB). This also meant that I ran 'apt-ftparchive packages' on the
entire .debs each time I wanted an updated Packages file, and that was
dozens of minutes of heavy I/O. This painful life has been going on for
a number of months, and am stupid that I didn't search harder for a
better solution.</p>
<p>Before doing things this way, I was making use of the nifty <a class="reference external" href="http://aptoncd.sourceforge.net/">APTonCD</a>,
but it started to become unusable due to excessive memory consumption
after some system updates. It's not clear where the bug lies, nor do I
know if it's a known problem, which I didn't report because I was using
Ubuntu's package, a much improved and re-written 0.1.98, as opposed to
Debian's 'bug-free' 0.1 (though I later discovered the bug to exist when
running the package in Ubuntu 8.10 too).</p>
<hr class="docutils" />
<p><a class="reference external" href="http://tshepang.net/my-debian-package-management-setup">an update on how I do things now</a></p>

		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="http://tshepang.net/tag/debian" rel="tag">Debian</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post-->
	<div id="comments">
		<div id="respond">
			<div id="disqus_thread"></div>
	        <script type="text/javascript">
	            var disqus_shortname = 'tshepanglogs';
	
	            /* * * DON'T EDIT BELOW THIS LINE * * */
	            (function() {
	                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	            })();
	        </script>
	        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</div><!-- #respond -->					
</div><!-- #comments -->

		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
				<script type="text/javascript">
					var _gaq = _gaq || [];
					_gaq.push(['_setAccount', 'UA-16685250-3']);
					_gaq.push(['_trackPageview']);
					(function() {
						var ga = document.createElement('script'); 
						ga.type = 'text/javascript'; ga.async = true;
						ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
						var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
					})();
				</script>
<script type="text/javascript">
    var disqus_shortname = 'tshepanglogs';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>